{% extends 'layout.html.twig' %}

{% block main %}
<h2>List of GitHub pushes</h2>

<table class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>ID</th>
			<th>Timestamp</th>
			<th>Repository</th>
            <th>Ref</th>
            <th>#Commits</th>
            <th>Before</th>
			<th>After</th>
			<th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for push in pushes %}
        <tr class="success">
            <td>{{ push.id }}</td>
			<td>{{ push.timestamp | date('d/m/Y - H:i:s') }}</td>
			<td><a href="/repositories/{{ repository.id }}">{{ push.repository }}</a></td>
			<td>{{ push.ref }}</td>
			<td>{{ push.commits | length }}</td>
			<td>{{ push.before }}</td>
			<td>{{ push.after }}</td>
            <td>
                <a href="/pushes/{{ push.id }}" class="btn"><i class="icon-eye-open"></i></a>
                <a href="/pushes/{{ repository.id }}/executions" class="btn"><i class="icon-list-alt"></i></a>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="7">No push have been received yet</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}